<?xml version="1.0" encoding="UTF-8" ?>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
        xmlns:bridge="http://liferay.com/faces/bridge">

    <h:head />

    <h:body>
        <c:set var="beneficiary" value="#{dbViewBeneficiaryBackingBean.beneficiary}" scope="request" />

        <h1>#{beneficiary.firstName} #{beneficiary.lastName}</h1>

        <p>
            Identification number: <b><h:outputText value="#{beneficiary.identification}" /></b>
        </p>

        <h2>Grants</h2>
        <ui:fragment rendered="#{not empty beneficiary.grants}">
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th scope="col">Invoice</th>
                    <th scope="col">Delivery Date</th>
                    <th scope="col">Amount</th>
                    <th scope="col">VAT</th>
                    <th scope="col">Status</th>
                </tr>
                </thead>
                <tbody>
                <ui:repeat id="grants" value="#{beneficiary.grants}" var="grant">
                    <tr>
                        <td>
                            <h:outputText value="#{grant.invoice.verificationNumber}"/>
                        </td>
                        <td>
                            <h:outputText value="#{grant.deliveryDate}" />
                        </td>
                        <td>
                            <h:outputText value="#{grant.amount/100} kr" />
                        </td>
                        <td>
                            <h:outputText value="#{grant.vat/100} kr" />
                        </td>
                        <td>
                            <h:outputText value="#{grant.invoice.status}"/>
                        </td>
                    </tr>
                </ui:repeat>
                </tbody>
            </table>
        </ui:fragment>
        <ui:fragment rendered="#{empty beneficiary.grants}">
            <div class="alert alert-warning">
                No grants received.
            </div>
        </ui:fragment>

        <h:link outcome="view" value="Back"/>
    </h:body>
</f:view>
